{
  "version": 4,
  "terraform_version": "1.11.4",
  "serial": 3,
  "lineage": "694e4bfa-05f3-fcf4-261f-f12a3344206f",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "azurerm_virtual_machine",
      "name": "existing_vms",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "index_key": "poc-hyc",
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/233e16db-2636-4f3c-8ae7-cdd9678d940b/resourceGroups/poc-hyc/providers/Microsoft.Compute/virtualMachines/poc-hyc",
            "identity": [],
            "location": "westus3",
            "name": "poc-hyc",
            "power_state": "running",
            "private_ip_address": "10.0.0.4",
            "private_ip_addresses": [
              "10.0.0.4"
            ],
            "public_ip_address": "20.163.12.19",
            "public_ip_addresses": [
              "20.163.12.19"
            ],
            "resource_group_name": "poc-hyc",
            "timeouts": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.vm_monitoring",
      "mode": "managed",
      "type": "azurerm_monitor_action_group",
      "name": "poc_alert",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arm_role_receiver": [],
            "automation_runbook_receiver": [],
            "azure_app_push_receiver": [],
            "azure_function_receiver": [],
            "email_receiver": [
              {
                "email_address": "lunar.gultom@ollion.com",
                "name": "default-email",
                "use_common_alert_schema": true
              }
            ],
            "enabled": true,
            "event_hub_receiver": [],
            "id": "/subscriptions/233e16db-2636-4f3c-8ae7-cdd9678d940b/resourceGroups/poc-hyc/providers/Microsoft.Insights/actionGroups/POCAutomateAlert",
            "itsm_receiver": [],
            "location": "global",
            "logic_app_receiver": [],
            "name": "POCAutomateAlert",
            "resource_group_name": "poc-hyc",
            "short_name": "poc-alert",
            "sms_receiver": [],
            "tags": {
              "environment": "poc",
              "owner": "poc-hyc",
              "project": "poc-monitoring"
            },
            "timeouts": null,
            "voice_receiver": [],
            "webhook_receiver": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "module": "module.vm_monitoring",
      "mode": "managed",
      "type": "azurerm_monitor_metric_alert",
      "name": "high_cpu_alert",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "action": [
              {
                "action_group_id": "/subscriptions/233e16db-2636-4f3c-8ae7-cdd9678d940b/resourceGroups/poc-hyc/providers/Microsoft.Insights/actionGroups/POCAutomateAlert",
                "webhook_properties": null
              }
            ],
            "application_insights_web_test_location_availability_criteria": [],
            "auto_mitigate": true,
            "criteria": [
              {
                "aggregation": "Average",
                "dimension": [],
                "metric_name": "Percentage CPU",
                "metric_namespace": "Microsoft.Compute/virtualMachines",
                "operator": "GreaterThan",
                "skip_metric_validation": false,
                "threshold": 10
              }
            ],
            "description": "Alert when CPU usage exceeds 10%",
            "dynamic_criteria": [],
            "enabled": true,
            "frequency": "PT1M",
            "id": "/subscriptions/233e16db-2636-4f3c-8ae7-cdd9678d940b/resourceGroups/poc-hyc/providers/Microsoft.Insights/metricAlerts/high_cpu_alert",
            "name": "high_cpu_alert",
            "resource_group_name": "poc-hyc",
            "scopes": [
              "/subscriptions/233e16db-2636-4f3c-8ae7-cdd9678d940b/resourceGroups/poc-hyc/providers/Microsoft.Compute/virtualMachines/poc-hyc"
            ],
            "severity": 3,
            "tags": null,
            "target_resource_location": "",
            "target_resource_type": "",
            "timeouts": null,
            "window_size": "PT5M"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vm_monitoring.azurerm_monitor_action_group.poc_alert"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
