{
  "version": 4,
  "terraform_version": "1.11.4",
  "serial": 92,
  "lineage": "694e4bfa-05f3-fcf4-261f-f12a3344206f",
  "outputs": {},
  "resources": [
    {
      "module": "module.action_group",
      "mode": "managed",
      "type": "azurerm_monitor_action_group",
      "name": "main",
      "provider": "module.action_group.provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arm_role_receiver": [],
            "automation_runbook_receiver": [],
            "azure_app_push_receiver": [],
            "azure_function_receiver": [],
            "email_receiver": [
              {
                "email_address": "lunar.gultom@gmail.com",
                "name": "lunar.gultom_gmail.com",
                "use_common_alert_schema": true
              }
            ],
            "enabled": true,
            "event_hub_receiver": [],
            "id": "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Insights/actionGroups/POCAutomateAlert",
            "itsm_receiver": [],
            "location": "global",
            "logic_app_receiver": [],
            "name": "POCAutomateAlert",
            "resource_group_name": "apac-es-devops-lunar-gultom",
            "short_name": "poc-alert",
            "sms_receiver": [],
            "tags": {
              "environment": "prod",
              "owner": "ollion"
            },
            "timeouts": null,
            "voice_receiver": [],
            "webhook_receiver": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "module": "module.dns_monitoring",
      "mode": "managed",
      "type": "azurerm_monitor_activity_log_alert",
      "name": "dns_zone_write_alert",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"].hyc",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "action": [
              {
                "action_group_id": "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Insights/actionGroups/POCAutomateAlert",
                "webhook_properties": {}
              }
            ],
            "criteria": [
              {
                "caller": "",
                "category": "Administrative",
                "level": "Informational",
                "levels": [],
                "operation_name": "Microsoft.Network/dnszones/write",
                "recommendation_category": "",
                "recommendation_impact": "",
                "recommendation_type": "",
                "resource_group": "",
                "resource_groups": [],
                "resource_health": [],
                "resource_id": "",
                "resource_ids": [],
                "resource_provider": "",
                "resource_providers": [],
                "resource_type": "",
                "resource_types": [],
                "service_health": [],
                "status": "",
                "statuses": [],
                "sub_status": "",
                "sub_statuses": []
              }
            ],
            "description": "Alert when DNS zone is modified",
            "enabled": true,
            "id": "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Insights/activityLogAlerts/dns-zone-write-alert",
            "location": "global",
            "name": "dns-zone-write-alert",
            "resource_group_name": "apac-es-devops-lunar-gultom",
            "scopes": [
              "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Network/dnszones/hycpoc.com"
            ],
            "tags": {
              "environment": "prod",
              "owner": "poc-hyc",
              "project": "poc-monitoring"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.action_group.azurerm_monitor_action_group.main"
          ]
        }
      ]
    },
    {
      "module": "module.vm_monitoring",
      "mode": "managed",
      "type": "azurerm_monitor_metric_alert",
      "name": "high_cpu_alert",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"].hyc",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "action": [
              {
                "action_group_id": "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Insights/actionGroups/POCAutomateAlert",
                "webhook_properties": {}
              }
            ],
            "application_insights_web_test_location_availability_criteria": [],
            "auto_mitigate": true,
            "criteria": [
              {
                "aggregation": "Average",
                "dimension": [],
                "metric_name": "Percentage CPU",
                "metric_namespace": "Microsoft.Compute/virtualMachines",
                "operator": "GreaterThan",
                "skip_metric_validation": false,
                "threshold": 10
              }
            ],
            "description": "Alert when CPU usage exceeds 10%",
            "dynamic_criteria": [],
            "enabled": true,
            "frequency": "PT1M",
            "id": "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Insights/metricAlerts/high_cpu_alert",
            "name": "high_cpu_alert",
            "resource_group_name": "apac-es-devops-lunar-gultom",
            "scopes": [
              "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Compute/virtualMachines/poc-hyc"
            ],
            "severity": 3,
            "tags": {},
            "target_resource_location": "",
            "target_resource_type": "",
            "timeouts": null,
            "window_size": "PT5M"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.action_group.azurerm_monitor_action_group.main"
          ]
        }
      ]
    },
    {
      "module": "module.vm_monitoring",
      "mode": "managed",
      "type": "azurerm_monitor_metric_alert",
      "name": "low_memory_bytes_alert",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"].hyc",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "action": [
              {
                "action_group_id": "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Insights/actionGroups/POCAutomateAlert",
                "webhook_properties": {}
              }
            ],
            "application_insights_web_test_location_availability_criteria": [],
            "auto_mitigate": true,
            "criteria": [
              {
                "aggregation": "Average",
                "dimension": [],
                "metric_name": "Available Memory Bytes",
                "metric_namespace": "Microsoft.Compute/virtualMachines",
                "operator": "LessThan",
                "skip_metric_validation": false,
                "threshold": 10000000000
              }
            ],
            "description": "Alert when available memory is below 10 GB",
            "dynamic_criteria": [],
            "enabled": true,
            "frequency": "PT1M",
            "id": "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Insights/metricAlerts/low_memory_alert_10gb",
            "name": "low_memory_alert_10gb",
            "resource_group_name": "apac-es-devops-lunar-gultom",
            "scopes": [
              "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Compute/virtualMachines/poc-hyc"
            ],
            "severity": 3,
            "tags": {},
            "target_resource_location": "",
            "target_resource_type": "",
            "timeouts": null,
            "window_size": "PT5M"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.action_group.azurerm_monitor_action_group.main"
          ]
        }
      ]
    },
    {
      "module": "module.vm_monitoring",
      "mode": "managed",
      "type": "azurerm_monitor_metric_alert",
      "name": "low_memory_percentage",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"].hyc",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "action": [
              {
                "action_group_id": "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Insights/actionGroups/POCAutomateAlert",
                "webhook_properties": {}
              }
            ],
            "application_insights_web_test_location_availability_criteria": [],
            "auto_mitigate": true,
            "criteria": [
              {
                "aggregation": "Average",
                "dimension": [],
                "metric_name": "Available Memory Percentage",
                "metric_namespace": "Microsoft.Compute/virtualMachines",
                "operator": "GreaterThan",
                "skip_metric_validation": false,
                "threshold": 10
              }
            ],
            "description": "Alert when available memory is below 10%",
            "dynamic_criteria": [],
            "enabled": true,
            "frequency": "PT1M",
            "id": "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Insights/metricAlerts/low_memory_alert_10percent",
            "name": "low_memory_alert_10percent",
            "resource_group_name": "apac-es-devops-lunar-gultom",
            "scopes": [
              "/subscriptions/0e1373c7-d99a-4eaa-9e16-59e648375f9e/resourceGroups/apac-es-devops-lunar-gultom/providers/Microsoft.Compute/virtualMachines/poc-hyc"
            ],
            "severity": 3,
            "tags": {},
            "target_resource_location": "",
            "target_resource_type": "",
            "timeouts": null,
            "window_size": "PT5M"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.action_group.azurerm_monitor_action_group.main"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
